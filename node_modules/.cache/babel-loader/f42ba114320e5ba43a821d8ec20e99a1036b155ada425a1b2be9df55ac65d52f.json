{"ast":null,"code":"import _slicedToArray from\"/Users/mac/Documents/store/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useDispatch}from\"react-redux\";import{SortPropertyEnum}from\"../redux/filter/type\";import{setSort}from\"../redux/filter/slice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var list=[{name:\"Начать с новинок\",sortProperty:SortPropertyEnum.DATE},{name:\"По рейтингу\",sortProperty:SortPropertyEnum.RATING},{name:\"От дешёвых к дорогим\",sortProperty:SortPropertyEnum.PRICE_ASC},{name:\"От дорогих к дешёвым\",sortProperty:SortPropertyEnum.PRICE_DESC}];export var Filters=/*#__PURE__*/React.memo(function(_ref){var value=_ref.value;var dispatch=useDispatch();var sortRef=React.useRef(null);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var onClickListItem=function onClickListItem(obj){dispatch(setSort(obj));setOpen(false);};React.useEffect(function(){var handleClickOutside=function handleClickOutside(e){var _event=e;if(sortRef.current&&!_event.composedPath().includes(sortRef.current))setOpen(false);};document.body.addEventListener(\"click\",handleClickOutside);return function(){return document.body.removeEventListener(\"click\",handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"div\",{ref:sortRef,className:\"filters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content__slider\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"color\",children:/*#__PURE__*/_jsxs(\"button\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0426\\u0432\\u0435\\u0442\"}),/*#__PURE__*/_jsx(\"img\",{src:\"./img/arrow__down.svg\",width:15,height:15,alt:\"Arrow Down\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters__content__right\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"14 \\u0432\\u0435\\u0449\\u0435\\u0439\"}),/*#__PURE__*/_jsx(\"div\",{className:\"strip\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"sorting\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setOpen(!open);},children:value.name}),/*#__PURE__*/_jsx(\"img\",{src:\"./img/arrow__down.svg\",width:15,height:15,alt:\"Arrow Down\"})]})]})]}),open&&/*#__PURE__*/_jsx(\"div\",{className:\"sorting_down\",children:/*#__PURE__*/_jsx(\"ul\",{children:list.map(function(obj,i){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return onClickListItem(obj);},className:value.sortProperty===obj.sortProperty?\"active1\":\"\",children:obj.name},i);})})})]});});","map":{"version":3,"names":["React","useDispatch","SortPropertyEnum","setSort","jsx","_jsx","jsxs","_jsxs","list","name","sortProperty","DATE","RATING","PRICE_ASC","PRICE_DESC","Filters","memo","_ref","value","dispatch","sortRef","useRef","_React$useState","useState","_React$useState2","_slicedToArray","open","setOpen","onClickListItem","obj","useEffect","handleClickOutside","e","_event","current","composedPath","includes","document","body","addEventListener","removeEventListener","ref","className","children","src","width","height","alt","onClick","map","i"],"sources":["/Users/mac/Documents/store/my-app/src/components/Filters.tsx"],"sourcesContent":["import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { SortPropertyEnum, Filter } from \"../redux/filter/type\";\nimport { setSort } from \"../redux/filter/slice\";\n\ntype FilterItem = {\n  name: string;\n  sortProperty: SortPropertyEnum;\n};\n\ntype PopupClick = MouseEvent & {\n  path: Node[];\n};\n\ntype FilterProps = { value: Filter };\n\nexport const list: FilterItem[] = [\n  { name: \"Начать с новинок\", sortProperty: SortPropertyEnum.DATE },\n  { name: \"По рейтингу\", sortProperty: SortPropertyEnum.RATING },\n  { name: \"От дешёвых к дорогим\", sortProperty: SortPropertyEnum.PRICE_ASC },\n  { name: \"От дорогих к дешёвым\", sortProperty: SortPropertyEnum.PRICE_DESC },\n];\n\nexport const Filters: React.FC<FilterProps> = React.memo(({ value }) => {\n  const dispatch = useDispatch();\n  const sortRef = React.useRef<HTMLDivElement>(null);\n\n  const [open, setOpen] = React.useState(false);\n\n  const onClickListItem = (obj: FilterItem) => {\n    dispatch(setSort(obj));\n    setOpen(false);\n  };\n\n  React.useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      const _event = e as PopupClick;\n      if (sortRef.current && !_event.composedPath().includes(sortRef.current))\n        setOpen(false);\n    };\n\n    document.body.addEventListener(\"click\", handleClickOutside);\n\n    return () => document.body.removeEventListener(\"click\", handleClickOutside);\n  }, []);\n\n  return (\n    <div ref={sortRef} className=\"filters\">\n      <div className=\"content__slider\">\n        <div className=\"color\">\n          <button>\n            <span>Цвет</span>\n            <img\n              src=\"./img/arrow__down.svg\"\n              width={15}\n              height={15}\n              alt=\"Arrow Down\"></img>\n          </button>\n        </div>\n        <div className=\"filters__content__right\">\n          <p>14 вещей</p>\n          <div className=\"strip\"></div>\n          <div className=\"sorting\">\n            <span onClick={() => setOpen(!open)}>{value.name}</span>\n            <img\n              src=\"./img/arrow__down.svg\"\n              width={15}\n              height={15}\n              alt=\"Arrow Down\"></img>\n          </div>\n        </div>\n      </div>\n      {open && (\n        <div className=\"sorting_down\">\n          <ul>\n            {list.map((obj, i) => (\n              <li\n                key={i}\n                onClick={() => onClickListItem(obj)}\n                className={\n                  value.sortProperty === obj.sortProperty ? \"active1\" : \"\"\n                }>\n                {obj.name}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}