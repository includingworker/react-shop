{"ast":null,"code":"import { useCallback, useEffect, useRef } from 'react';\nimport useLatest from '../useLatest';\nimport { isNumber } from '../utils';\nconst setRafTimeout = function (callback) {\n  let delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  if (typeof requestAnimationFrame === typeof undefined) {\n    return {\n      id: setTimeout(callback, delay)\n    };\n  }\n  const handle = {\n    id: 0\n  };\n  const startTime = new Date().getTime();\n  const loop = () => {\n    const current = new Date().getTime();\n    if (current - startTime >= delay) {\n      callback();\n    } else {\n      handle.id = requestAnimationFrame(loop);\n    }\n  };\n  handle.id = requestAnimationFrame(loop);\n  return handle;\n};\nfunction cancelAnimationFrameIsNotDefined(t) {\n  return typeof cancelAnimationFrame === typeof undefined;\n}\nconst clearRafTimeout = function (handle) {\n  if (cancelAnimationFrameIsNotDefined(handle.id)) {\n    return clearTimeout(handle.id);\n  }\n  cancelAnimationFrame(handle.id);\n};\nfunction useRafTimeout(fn, delay) {\n  const fnRef = useLatest(fn);\n  const timerRef = useRef();\n  useEffect(() => {\n    if (!isNumber(delay) || delay < 0) return;\n    timerRef.current = setRafTimeout(() => {\n      fnRef.current();\n    }, delay);\n    return () => {\n      if (timerRef.current) {\n        clearRafTimeout(timerRef.current);\n      }\n    };\n  }, [delay]);\n  const clear = useCallback(() => {\n    if (timerRef.current) {\n      clearRafTimeout(timerRef.current);\n    }\n  }, []);\n  return clear;\n}\nexport default useRafTimeout;","map":{"version":3,"names":["useCallback","useEffect","useRef","useLatest","isNumber","setRafTimeout","callback","delay","arguments","length","undefined","requestAnimationFrame","id","setTimeout","handle","startTime","Date","getTime","loop","current","cancelAnimationFrameIsNotDefined","t","cancelAnimationFrame","clearRafTimeout","clearTimeout","useRafTimeout","fn","fnRef","timerRef","clear"],"sources":["/Users/mac/node_modules/ahooks/es/useRafTimeout/index.js"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\nimport useLatest from '../useLatest';\nimport { isNumber } from '../utils';\nconst setRafTimeout = function (callback, delay = 0) {\n  if (typeof requestAnimationFrame === typeof undefined) {\n    return {\n      id: setTimeout(callback, delay)\n    };\n  }\n  const handle = {\n    id: 0\n  };\n  const startTime = new Date().getTime();\n  const loop = () => {\n    const current = new Date().getTime();\n    if (current - startTime >= delay) {\n      callback();\n    } else {\n      handle.id = requestAnimationFrame(loop);\n    }\n  };\n  handle.id = requestAnimationFrame(loop);\n  return handle;\n};\nfunction cancelAnimationFrameIsNotDefined(t) {\n  return typeof cancelAnimationFrame === typeof undefined;\n}\nconst clearRafTimeout = function (handle) {\n  if (cancelAnimationFrameIsNotDefined(handle.id)) {\n    return clearTimeout(handle.id);\n  }\n  cancelAnimationFrame(handle.id);\n};\nfunction useRafTimeout(fn, delay) {\n  const fnRef = useLatest(fn);\n  const timerRef = useRef();\n  useEffect(() => {\n    if (!isNumber(delay) || delay < 0) return;\n    timerRef.current = setRafTimeout(() => {\n      fnRef.current();\n    }, delay);\n    return () => {\n      if (timerRef.current) {\n        clearRafTimeout(timerRef.current);\n      }\n    };\n  }, [delay]);\n  const clear = useCallback(() => {\n    if (timerRef.current) {\n      clearRafTimeout(timerRef.current);\n    }\n  }, []);\n  return clear;\n}\nexport default useRafTimeout;"],"mappings":"AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACtD,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,QAAQ,QAAQ,UAAU;AACnC,MAAMC,aAAa,GAAG,SAAAA,CAAUC,QAAQ,EAAa;EAAA,IAAXC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;EACjD,IAAI,OAAOG,qBAAqB,KAAK,OAAOD,SAAS,EAAE;IACrD,OAAO;MACLE,EAAE,EAAEC,UAAU,CAACP,QAAQ,EAAEC,KAAK;IAChC,CAAC;EACH;EACA,MAAMO,MAAM,GAAG;IACbF,EAAE,EAAE;EACN,CAAC;EACD,MAAMG,SAAS,GAAG,IAAIC,IAAI,EAAE,CAACC,OAAO,EAAE;EACtC,MAAMC,IAAI,GAAGA,CAAA,KAAM;IACjB,MAAMC,OAAO,GAAG,IAAIH,IAAI,EAAE,CAACC,OAAO,EAAE;IACpC,IAAIE,OAAO,GAAGJ,SAAS,IAAIR,KAAK,EAAE;MAChCD,QAAQ,EAAE;IACZ,CAAC,MAAM;MACLQ,MAAM,CAACF,EAAE,GAAGD,qBAAqB,CAACO,IAAI,CAAC;IACzC;EACF,CAAC;EACDJ,MAAM,CAACF,EAAE,GAAGD,qBAAqB,CAACO,IAAI,CAAC;EACvC,OAAOJ,MAAM;AACf,CAAC;AACD,SAASM,gCAAgCA,CAACC,CAAC,EAAE;EAC3C,OAAO,OAAOC,oBAAoB,KAAK,OAAOZ,SAAS;AACzD;AACA,MAAMa,eAAe,GAAG,SAAAA,CAAUT,MAAM,EAAE;EACxC,IAAIM,gCAAgC,CAACN,MAAM,CAACF,EAAE,CAAC,EAAE;IAC/C,OAAOY,YAAY,CAACV,MAAM,CAACF,EAAE,CAAC;EAChC;EACAU,oBAAoB,CAACR,MAAM,CAACF,EAAE,CAAC;AACjC,CAAC;AACD,SAASa,aAAaA,CAACC,EAAE,EAAEnB,KAAK,EAAE;EAChC,MAAMoB,KAAK,GAAGxB,SAAS,CAACuB,EAAE,CAAC;EAC3B,MAAME,QAAQ,GAAG1B,MAAM,EAAE;EACzBD,SAAS,CAAC,MAAM;IACd,IAAI,CAACG,QAAQ,CAACG,KAAK,CAAC,IAAIA,KAAK,GAAG,CAAC,EAAE;IACnCqB,QAAQ,CAACT,OAAO,GAAGd,aAAa,CAAC,MAAM;MACrCsB,KAAK,CAACR,OAAO,EAAE;IACjB,CAAC,EAAEZ,KAAK,CAAC;IACT,OAAO,MAAM;MACX,IAAIqB,QAAQ,CAACT,OAAO,EAAE;QACpBI,eAAe,CAACK,QAAQ,CAACT,OAAO,CAAC;MACnC;IACF,CAAC;EACH,CAAC,EAAE,CAACZ,KAAK,CAAC,CAAC;EACX,MAAMsB,KAAK,GAAG7B,WAAW,CAAC,MAAM;IAC9B,IAAI4B,QAAQ,CAACT,OAAO,EAAE;MACpBI,eAAe,CAACK,QAAQ,CAACT,OAAO,CAAC;IACnC;EACF,CAAC,EAAE,EAAE,CAAC;EACN,OAAOU,KAAK;AACd;AACA,eAAeJ,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}