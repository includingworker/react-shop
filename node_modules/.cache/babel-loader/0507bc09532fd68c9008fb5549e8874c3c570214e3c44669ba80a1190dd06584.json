{"ast":null,"code":"import _toConsumableArray from\"/Users/mac/Documents/store/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/mac/Documents/store/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/mac/Documents/store/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mac/Documents/store/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{setCategoryId}from\"../redux/filter/slice\";import{selectFilter}from\"../redux/filter/selectors\";import{fetchItems}from\"../redux/item/asyncActions\";import{selectItemsData}from\"../redux/item/selectors\";import{useAppDispatch}from\"../redux/store\";import{Categories}from\"../components/Categories\";import{Filters}from\"../components/Filters\";import ItemBlock from\"../components/ItemBlock\";// import { SearchContext } from \"../App\";\nimport MyLoader from\"../components/ItemBlock/Skeleton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shitrs=function Shitrs(){var navigate=useNavigate();var dispatch=useAppDispatch();// const isSearch = React.useRef(false);\nvar isMounted=React.useRef(false);var _useSelector=useSelector(selectItemsData),items=_useSelector.items,status=_useSelector.status;var _useSelector2=useSelector(selectFilter),categoryId=_useSelector2.categoryId,sort=_useSelector2.sort;// const { searchValue } = React.useContext(SearchContext);\nvar onChangeCategory=React.useCallback(function(idx){dispatch(setCategoryId(idx));},[]);// React.useEffect(() => {\n//   if (isMounted.current) {\n//     const queryString = qs.stringify({\n//       sortProperty: sort.sortProperty,\n//       categoryId,\n//     });\n//     navigate(`?${queryString}`);\n//   }\n//   // isMounted.current = true;\n// }, [categoryId, sort.sortProperty, navigate]);\n// React.useEffect(() => {\n//   if (window.location.search) {\n//     const params = qs.parse(\n//       window.location.search.substring(1) as unknown as SearchItemParams\n//     );\n//     const sort = list.find((obj) => obj.sortProperty === params.sortBy);\n//     dispatch(\n//       setFilters({\n//         searchValue: String(params.search),\n//         categoryId: Number(params.category),\n//         sort: sort || list[0],\n//       })\n//     );\n//     isMounted.current = true;\n//     // isSearch.current = true;\n//   }\n// }, [dispatch]);\nReact.useEffect(function(){var getItems=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var sortBy,order,category;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:sortBy=sort.sortProperty.replace(\"-\",\"\");order=sort.sortProperty.includes(\"-\")?\"asc\":\"desc\";category=categoryId;// const search = searchValue ? `&search=${searchValue}` : \"\";\ndispatch(//@ts-ignore\nfetchItems({sortBy:sortBy,order:order,category:String(category)// search,\n}));case 4:case\"end\":return _context.stop();}},_callee);}));return function getItems(){return _ref.apply(this,arguments);};}();getItems();},[categoryId,sort.sortProperty,dispatch]);var products=items.map(function(obj){return/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(obj.id),children:/*#__PURE__*/_jsx(ItemBlock,_objectSpread({},obj))},obj.id);});var skeletons=_toConsumableArray(new Array(6)).map(function(_,index){return/*#__PURE__*/_jsx(MyLoader,{},index);});// .filter((obj) => {\n//   if (obj.title.toLowerCase().includes(searchValue.toLowerCase())) {\n//     return true;\n//   }\n//   return false;\n// })\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"shirts\",children:[/*#__PURE__*/_jsx(Categories,{value:categoryId,onChangeCategory:onChangeCategory}),/*#__PURE__*/_jsx(Filters,{value:sort}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u0414\\u0416\\u0418\\u041D\\u0421\\u042B\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"description\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u042D\\u0442\\u0438 \\u0434\\u0436\\u0438\\u043D\\u0441\\u044B Muse, \\u0438\\u0437\\u0433\\u043E\\u0442\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0438\\u0441\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E \\u0432 \\u0418\\u0442\\u0430\\u043B\\u0438\\u0438 \\u0438\\u043B\\u0438 \\u042F\\u043F\\u043E\\u043D\\u0438\\u0438, \\u043C\\u0435\\u043D\\u044F\\u044E\\u0442 \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043E \\u0434\\u0436\\u0438\\u043D\\u0441\\u0430\\u0445, \",/*#__PURE__*/_jsx(\"br\",{}),\" \\u043F\\u0440\\u0438\\u0434\\u0430\\u0432\\u0430\\u044F \\u0438\\u043C \\u0443\\u0442\\u043E\\u043D\\u0447\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0441\\u043E\\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0432\\u0438\\u0434.\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:status===\"loading\"?skeletons:products})]});};export default Shitrs;","map":{"version":3,"names":["React","Link","useNavigate","useSelector","setCategoryId","selectFilter","fetchItems","selectItemsData","useAppDispatch","Categories","Filters","ItemBlock","MyLoader","jsx","_jsx","jsxs","_jsxs","Shitrs","navigate","dispatch","isMounted","useRef","_useSelector","items","status","_useSelector2","categoryId","sort","onChangeCategory","useCallback","idx","useEffect","getItems","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","sortBy","order","category","wrap","_callee$","_context","prev","next","sortProperty","replace","includes","String","stop","apply","arguments","products","map","obj","to","concat","id","children","_objectSpread","skeletons","_toConsumableArray","Array","_","index","className","value"],"sources":["/Users/mac/Documents/store/my-app/src/pages/Shitrs.tsx"],"sourcesContent":["import React from \"react\";\nimport qs from \"qs\";\n\nimport { Link, useNavigate } from \"react-router-dom\";\n\nimport { useSelector } from \"react-redux\";\nimport { setCategoryId, setFilters } from \"../redux/filter/slice\";\nimport { selectFilter } from \"../redux/filter/selectors\";\nimport { fetchItems } from \"../redux/item/asyncActions\";\nimport { selectItemsData } from \"../redux/item/selectors\";\nimport { useAppDispatch } from \"../redux/store\";\n\nimport { Categories } from \"../components/Categories\";\nimport { Filters, list } from \"../components/Filters\";\nimport ItemBlock from \"../components/ItemBlock\";\n// import { SearchContext } from \"../App\";\n\nimport MyLoader from \"../components/ItemBlock/Skeleton\";\n\nconst Shitrs: React.FC = () => {\n  const navigate = useNavigate();\n  const dispatch = useAppDispatch();\n  // const isSearch = React.useRef(false);\n  const isMounted = React.useRef(false);\n\n  const { items, status } = useSelector(selectItemsData);\n\n  const { categoryId, sort } = useSelector(selectFilter);\n\n  // const { searchValue } = React.useContext(SearchContext);\n\n  const onChangeCategory = React.useCallback((idx: number) => {\n    dispatch(setCategoryId(idx));\n  }, []);\n\n  // React.useEffect(() => {\n  //   if (isMounted.current) {\n  //     const queryString = qs.stringify({\n  //       sortProperty: sort.sortProperty,\n  //       categoryId,\n  //     });\n\n  //     navigate(`?${queryString}`);\n  //   }\n  //   // isMounted.current = true;\n  // }, [categoryId, sort.sortProperty, navigate]);\n\n  // React.useEffect(() => {\n  //   if (window.location.search) {\n  //     const params = qs.parse(\n  //       window.location.search.substring(1) as unknown as SearchItemParams\n  //     );\n  //     const sort = list.find((obj) => obj.sortProperty === params.sortBy);\n  //     dispatch(\n  //       setFilters({\n  //         searchValue: String(params.search),\n  //         categoryId: Number(params.category),\n  //         sort: sort || list[0],\n  //       })\n  //     );\n\n  //     isMounted.current = true;\n  //     // isSearch.current = true;\n  //   }\n  // }, [dispatch]);\n\n  React.useEffect(() => {\n    const getItems = async () => {\n      const sortBy = sort.sortProperty.replace(\"-\", \"\");\n      const order = sort.sortProperty.includes(\"-\") ? \"asc\" : \"desc\";\n      const category = categoryId;\n      // const search = searchValue ? `&search=${searchValue}` : \"\";\n\n      dispatch(\n        //@ts-ignore\n        fetchItems({\n          sortBy,\n          order,\n          category: String(category),\n          // search,\n        })\n      );\n    };\n    getItems();\n  }, [categoryId, sort.sortProperty, dispatch]);\n\n  const products = items.map((obj: any) => (\n    <Link key={obj.id} to={`/product/${obj.id}`}>\n      <ItemBlock {...obj} />\n    </Link>\n  ));\n  const skeletons = [...new Array(6)].map((_, index) => (\n    <MyLoader key={index} />\n  ));\n\n  // .filter((obj) => {\n  //   if (obj.title.toLowerCase().includes(searchValue.toLowerCase())) {\n  //     return true;\n  //   }\n\n  //   return false;\n  // })\n\n  return (\n    <div className=\"shirts\">\n      <Categories value={categoryId} onChangeCategory={onChangeCategory} />\n      <Filters value={sort} />\n      <div className=\"main\">\n        <div className=\"name\">\n          <span>ДЖИНСЫ</span>\n        </div>\n        <div className=\"description\">\n          <p>\n            Эти джинсы Muse, изготовленные исключительно в Италии или Японии,\n            меняют представление о джинсах, <br /> придавая им утонченный\n            современный вид.\n          </p>\n        </div>\n      </div>\n      <div className=\"content\">\n        {status === \"loading\" ? skeletons : products}\n      </div>\n    </div>\n  );\n};\n\nexport default Shitrs;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}