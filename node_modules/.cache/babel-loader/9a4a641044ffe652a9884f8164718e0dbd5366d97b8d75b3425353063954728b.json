{"ast":null,"code":"import { useMemo, useRef } from 'react';\nimport { isFunction } from '../utils';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdate from '../useUpdate';\nfunction useControllableValue() {\n  let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    defaultValue,\n    defaultValuePropName = 'defaultValue',\n    valuePropName = 'value',\n    trigger = 'onChange'\n  } = options;\n  const value = props[valuePropName];\n  const isControlled = props.hasOwnProperty(valuePropName);\n  const initialValue = useMemo(() => {\n    if (isControlled) {\n      return value;\n    }\n    if (props.hasOwnProperty(defaultValuePropName)) {\n      return props[defaultValuePropName];\n    }\n    return defaultValue;\n  }, []);\n  const stateRef = useRef(initialValue);\n  if (isControlled) {\n    stateRef.current = value;\n  }\n  const update = useUpdate();\n  function setState(v) {\n    const r = isFunction(v) ? v(stateRef.current) : v;\n    if (!isControlled) {\n      stateRef.current = r;\n      update();\n    }\n    if (props[trigger]) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      props[trigger](r, ...args);\n    }\n  }\n  return [stateRef.current, useMemoizedFn(setState)];\n}\nexport default useControllableValue;","map":{"version":3,"names":["useMemo","useRef","isFunction","useMemoizedFn","useUpdate","useControllableValue","props","arguments","length","undefined","options","defaultValue","defaultValuePropName","valuePropName","trigger","value","isControlled","hasOwnProperty","initialValue","stateRef","current","update","setState","v","r","_len","args","Array","_key"],"sources":["/Users/mac/Documents/store/my-app/node_modules/ahooks/es/useControllableValue/index.js"],"sourcesContent":["import { useMemo, useRef } from 'react';\nimport { isFunction } from '../utils';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdate from '../useUpdate';\nfunction useControllableValue(props = {}, options = {}) {\n  const {\n    defaultValue,\n    defaultValuePropName = 'defaultValue',\n    valuePropName = 'value',\n    trigger = 'onChange'\n  } = options;\n  const value = props[valuePropName];\n  const isControlled = props.hasOwnProperty(valuePropName);\n  const initialValue = useMemo(() => {\n    if (isControlled) {\n      return value;\n    }\n    if (props.hasOwnProperty(defaultValuePropName)) {\n      return props[defaultValuePropName];\n    }\n    return defaultValue;\n  }, []);\n  const stateRef = useRef(initialValue);\n  if (isControlled) {\n    stateRef.current = value;\n  }\n  const update = useUpdate();\n  function setState(v, ...args) {\n    const r = isFunction(v) ? v(stateRef.current) : v;\n    if (!isControlled) {\n      stateRef.current = r;\n      update();\n    }\n    if (props[trigger]) {\n      props[trigger](r, ...args);\n    }\n  }\n  return [stateRef.current, useMemoizedFn(setState)];\n}\nexport default useControllableValue;"],"mappings":"AAAA,SAASA,OAAO,EAAEC,MAAM,QAAQ,OAAO;AACvC,SAASC,UAAU,QAAQ,UAAU;AACrC,OAAOC,aAAa,MAAM,kBAAkB;AAC5C,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,oBAAoBA,CAAA,EAA2B;EAAA,IAA1BC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAAA,IAAEG,OAAO,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACpD,MAAM;IACJI,YAAY;IACZC,oBAAoB,GAAG,cAAc;IACrCC,aAAa,GAAG,OAAO;IACvBC,OAAO,GAAG;EACZ,CAAC,GAAGJ,OAAO;EACX,MAAMK,KAAK,GAAGT,KAAK,CAACO,aAAa,CAAC;EAClC,MAAMG,YAAY,GAAGV,KAAK,CAACW,cAAc,CAACJ,aAAa,CAAC;EACxD,MAAMK,YAAY,GAAGlB,OAAO,CAAC,MAAM;IACjC,IAAIgB,YAAY,EAAE;MAChB,OAAOD,KAAK;IACd;IACA,IAAIT,KAAK,CAACW,cAAc,CAACL,oBAAoB,CAAC,EAAE;MAC9C,OAAON,KAAK,CAACM,oBAAoB,CAAC;IACpC;IACA,OAAOD,YAAY;EACrB,CAAC,EAAE,EAAE,CAAC;EACN,MAAMQ,QAAQ,GAAGlB,MAAM,CAACiB,YAAY,CAAC;EACrC,IAAIF,YAAY,EAAE;IAChBG,QAAQ,CAACC,OAAO,GAAGL,KAAK;EAC1B;EACA,MAAMM,MAAM,GAAGjB,SAAS,EAAE;EAC1B,SAASkB,QAAQA,CAACC,CAAC,EAAW;IAC5B,MAAMC,CAAC,GAAGtB,UAAU,CAACqB,CAAC,CAAC,GAAGA,CAAC,CAACJ,QAAQ,CAACC,OAAO,CAAC,GAAGG,CAAC;IACjD,IAAI,CAACP,YAAY,EAAE;MACjBG,QAAQ,CAACC,OAAO,GAAGI,CAAC;MACpBH,MAAM,EAAE;IACV;IACA,IAAIf,KAAK,CAACQ,OAAO,CAAC,EAAE;MAAA,SAAAW,IAAA,GAAAlB,SAAA,CAAAC,MAAA,EANEkB,IAAI,OAAAC,KAAA,CAAAF,IAAA,OAAAA,IAAA,WAAAG,IAAA,MAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA;QAAJF,IAAI,CAAAE,IAAA,QAAArB,SAAA,CAAAqB,IAAA;MAAA;MAOxBtB,KAAK,CAACQ,OAAO,CAAC,CAACU,CAAC,EAAE,GAAGE,IAAI,CAAC;IAC5B;EACF;EACA,OAAO,CAACP,QAAQ,CAACC,OAAO,EAAEjB,aAAa,CAACmB,QAAQ,CAAC,CAAC;AACpD;AACA,eAAejB,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}